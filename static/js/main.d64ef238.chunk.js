(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{10:function(e,t,n){e.exports=n(31)},16:function(e,t,n){},17:function(e,t,n){},29:function(e,t,n){},30:function(e,t,n){},31:function(e,t,n){"use strict";n.r(t);var a,r,i,o,c,s,l,u,d=n(0),m=n.n(d),h=n(7),f=n.n(h),y=(n(16),n(1)),p=n(2),g=n(4),v=n(3),w=n(5),k=(n(17),n(8)),b=n.n(k),E=(n(29),function(e){function t(){return Object(y.a)(this,t),Object(g.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(w.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.user,a=t.savedTracks;return m.a.createElement("div",{style:{width:"40em",textAlign:"center"}},m.a.createElement("h2",{style:{backgroundColor:"transparent",margin:0,padding:"0 0 2em 0",color:"white"}},"Songs"),n?m.a.createElement("div",null,a?m.a.createElement("div",{style:{maxHeight:"60vh",overflow:"auto"}},a.map(function(t,n){return m.a.createElement("div",{key:n,className:"songList"},m.a.createElement("p",{key:n+16,style:{textAlign:"left",padding:".5em 0 0 1em",margin:"0",color:"white",fontSize:"1.2em"},onClick:function(n){return e.props.onSongClicked(t)}},t.name),m.a.createElement("p",{key:n,style:{textAlign:"left",margin:"0",padding:"0 0 .5em 1.2em",color:"rgba(256,256,256, .6)",fontSize:"1em"},onClick:function(n){return e.props.onSongClicked(t)}},t.artists[0].name," \xa0 \u2027 \xa0 ",t.album.name))})):m.a.createElement("p",null,"loading tracks...")):m.a.createElement("div",null,m.a.createElement("p",null,"loading")))}}]),t}(m.a.Component)),C=(n(30),n(9)),S=n.n(C),A=new Audio;A.crossOrigin="anonymous";var B=function(e){function t(){var e;return Object(y.a)(this,t),(e=Object(g.a)(this,Object(v.a)(t).call(this))).componentDidMount=function(){var e=new(window.AudioContext||window.webkitAudioContext);S()(e).then(function(e){},function(e){console.error(e)}),i=e.createAnalyser(),a=document.getElementById("canvas"),r=a.getContext("2d"),e.createMediaElementSource(A).connect(i),i.connect(e.destination),i.fftSize=256,a.style.width=(a.width=500)+"px",a.style.height=(a.height=500)+"px"},e.componentDidUpdate=function(t,n){t.currentSong!==e.props.currentSong&&(A.src=e.props.currentSong.preview_url,A.load(),A.play(),e.setState({isPlaying:!0,hasPlayed:!0})),e.checkRenderType(),e.checkActiveButton()},e.checkActiveButton=function(){for(var t=document.getElementsByTagName("button"),n=0;n<t.length;n++)t[n].id===e.state.renderType?t[n].setAttribute("class","active"):t[n].setAttribute("class","inactive")},e.renderBars=function(){requestAnimationFrame(e.renderBars),o=new Uint8Array(i.frequencyBinCount),i.getByteFrequencyData(o),r.clearRect(0,0,a.width,a.height),r.fillStyle=e.state.renderColor,c=100;for(var t=0;t<c;t+=3)s=5*t,l=14,u=-2*o[t],r.fillRect(s,a.height,l,u)},e.renderLine=function(){var t;requestAnimationFrame(e.renderLine),o=new Uint8Array(i.frequencyBinCount),i.getByteFrequencyData(o),r.clearRect(0,0,a.width,a.height),r.fillStyle=e.state.renderColor,r.strokeStyle=e.state.renderColor,c=100;for(var n=0;n<c-1;n++)s=5*n,l=14,u=2*o[n],t=2*o[n+1],r.beginPath(),r.moveTo(5*n,u),r.lineTo(5*(n+1),t),r.stroke()},e.renderSquares=function(){requestAnimationFrame(e.renderSquares),o=new Uint8Array(i.frequencyBinCount),i.getByteFrequencyData(o),r.clearRect(0,0,a.width,a.height),r.fillStyle="white",c=100;for(var t=0;t<c-1;t+=3)s=3*t,l=8,u=o[t]/2,r.fillRect(s,u,l,u)},e.renderCircle=function(){requestAnimationFrame(e.renderCircle),o=new Uint8Array(i.frequencyBinCount),i.getByteFrequencyData(o),r.clearRect(0,0,a.width,a.height),r.strokeStyle="white",c=100;for(var t=0;t<c-1;t+=9)u=o[t],r.beginPath(),r.arc(250,250,.75*u,0,2*Math.PI),r.stroke()},e.onPlayPauseClick=function(){e.state.isPlaying?(A.pause(),e.setState({isPlaying:!1})):(A.play(),e.setState({isPlaying:!0}))},e.checkRenderType=function(){switch(e.state.renderType){case"bars":requestAnimationFrame(e.renderBars);break;case"line":requestAnimationFrame(e.renderLine);break;case"square":requestAnimationFrame(e.renderSquares);break;case"circle":requestAnimationFrame(e.renderCircle);break;default:requestAnimationFrame(e.renderBars)}},e.setRenderType=function(t){e.setState({renderType:t})},e.state={isPlaying:!1,hasPlayed:!1,renderType:"circle",renderColor:"white"},e}return Object(w.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this;return m.a.createElement("div",{style:{width:"500px"}},this.state.hasPlayed?m.a.createElement("div",{style:{color:"white"}},this.state.isPlaying?m.a.createElement("div",{className:"controls"},m.a.createElement("i",{onClick:this.onPlayPauseClick,className:"fas fa-pause"}),m.a.createElement("div",{className:"buttons"},m.a.createElement("button",{id:"bars",onClick:function(t){return e.setRenderType(t.target.id)}},"Bars"),m.a.createElement("button",{id:"line",onClick:function(t){return e.setRenderType(t.target.id)}},"Line"),m.a.createElement("button",{id:"circle",onClick:function(t){return e.setRenderType(t.target.id)}},"Circles"))):m.a.createElement("div",{className:"controls"},m.a.createElement("i",{onClick:this.onPlayPauseClick,className:"fas fa-play"}),m.a.createElement("div",{className:"buttons"},m.a.createElement("button",{id:"bars",onClick:function(t){return e.setRenderType(t.target.id)}},"Bars"),m.a.createElement("button",{id:"line",onClick:function(t){return e.setRenderType(t.target.id)}},"Line"),m.a.createElement("button",{id:"circle",onClick:function(t){return e.setRenderType(t.target.id)}},"Circles")))):m.a.createElement("h2",null,"Play a song to visualize it"),m.a.createElement("div",{id:"mp3_player"},m.a.createElement("canvas",{style:{margin:"0",padding:"0"},id:"canvas"})))}}]),t}(m.a.Component),T=function(e){function t(){var e;return Object(y.a)(this,t),(e=Object(g.a)(this,Object(v.a)(t).call(this))).componentDidMount=function(){var t=b.a.parse(window.location.search).access_token;t&&(fetch("https://api.spotify.com/v1/me",{headers:{Authorization:"Bearer "+t}}).then(function(e){return e.json()}).then(function(t){e.setState({user:{name:t.display_name,id:t.id}})}),fetch("https://api.spotify.com/v1/me/tracks",{headers:{Authorization:"Bearer "+t}}).then(function(e){return e.json()}).then(function(t){var n=t.items.map(function(e){return e.track});e.setState({savedTracks:n})},function(e){return console.log(e)}))},e.onSongClicked=function(t){e.setState({currentSong:t})},e.state={currentSong:null,user:"",savedTracks:""},e}return Object(w.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return m.a.createElement("div",{className:"App"},this.state.user?m.a.createElement(m.a.Fragment,null,this.state.currentSong?m.a.createElement("div",{style:{display:"flex",justifyContent:"center",width:"100%",flexWrap:"nowrap",flexDirection:"row"}},m.a.createElement("img",{alt:"cover art",id:"coverArt",src:this.state.currentSong.album.images[1].url}),m.a.createElement("h1",{id:"title",style:{color:"white",fontWeight:"600"}},"Spotify Visualizer")):m.a.createElement("h1",{id:"title",style:{color:"white",fontWeight:"600"}},"Spotify Visualizer"),this.state.currentSong?m.a.createElement("div",{style:{display:"flex",justifyContent:"center",flexWrap:"nowrap",flexDirection:"row",alignItems:"center"}},m.a.createElement("h2",{style:{color:"white",fontWeight:"300",margin:"0",fontSize:"1.5em"}},this.state.currentSong.name,"\xa0 \u2027 \xa0 ",this.state.currentSong.artists[0].name)):m.a.createElement("h2",{style:{color:"transparent",fontWeight:"300"}},"Click a song to play it!"),m.a.createElement("div",{className:"mainBody",style:{margin:"0"}},m.a.createElement(B,{currentSong:this.state.currentSong,audio:this.state.audio}),m.a.createElement(E,{user:this.state.user,onSongClicked:this.onSongClicked,savedTracks:this.state.savedTracks}))):m.a.createElement("button",{onClick:function(){window.location=window.location.href.includes("localhost")?"http://localhost:8888/login":"https://spoti-visualizer-backend.herokuapp.com/login"},style:{marginTop:"40vh",fontSize:"3rem",width:"50%",borderRadius:"2em",backgroundColor:"transparent",color:"white",border:"solid white 3px"}},"Sign in with spotify"))}}]),t}(d.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));f.a.render(m.a.createElement(T,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[10,1,2]]]);
//# sourceMappingURL=main.d64ef238.chunk.js.map